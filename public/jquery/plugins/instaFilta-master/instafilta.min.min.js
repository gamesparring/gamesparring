/*!
 * instaFilta
 * Version: 1.4.4
 * Description: jQuery plugin for performing in-page filtering
 * Homepage and documentation: https://github.com/chromawoods/instaFilta
 * Author: Andreas Larsson <andreas@chromawoods.com> (http://chromawoods.com)
 * Contributions: Jaap-Jan Frans
 */
;(function(b){b.fn.instaFilta=function(j){var l=null,k=null;var h=b.extend({scope:null,targets:".instafilta-target",sections:".instafilta-section",categoryDataAttr:"instafilta-category",matchCssClass:"instafilta-match",itemsHideEffect:"hide",itemsHideDuration:0,itemsShowEffect:"show",itemsShowDuration:0,sectionsHideEffect:"hide",sectionsHideDuration:0,sectionsShowEffect:"show",sectionsShowDuration:0,onFilterComplete:null,markMatches:false,hideEmptySections:true,beginsWith:false,caseSensitive:false,typeDelay:0,useSynonyms:true,synonyms:[{src:"à,á,å,ä,â,ã",dst:"a"},{src:"À,Á,Å,Ä,Â,Ã",dst:"A"},{src:"è,é,ë,ê",dst:"e"},{src:"È,É,Ë,Ê",dst:"E"},{src:"ì,í,ï,î",dst:"i"},{src:"Ì,Í,Ï,Î",dst:"I"},{src:"ò,ó,ö,ô,õ",dst:"o"},{src:"Ò,Ó,Ö,Ô,Õ",dst:"O"},{src:"ù,ú,ü,û",dst:"u"},{src:"Ù,Ú,Ü,Û",dst:"U"},{src:"ç",dst:"c"},{src:"Ç",dst:"C"},{src:"æ",dst:"ae"}]},j);if(h.useSynonyms){for(var i=0,a=h.synonyms.length;i<a;i++){h.synonyms[i].src=h.synonyms[i].src.split(",")}}this.each(function(){var q,c,d,r,f="";if(h.scope){r=b(this).closest(h.scope);c=r.find(h.targets);d=r.find(h.sections)}else{c=b(h.targets);d=b(h.sections)}c.each(function(){$target=b(this),original=$target.text();$target.data("values",(function(n){var w=[original],m=original;if(!h.useSynonyms){return w}for(var o=0,x=n.length;o<x;o++){for(var s=0;s<n[o].src.length;s++){m=m.replace(n[o].src[s],n[o].dst)}}!!(m===original)||w.push(m);return w}(h.synonyms)))});var e=function(){d.each(function(){var m=b(this);if(m.find('[data-instafilta-hide="false"]').length){m[h.sectionsShowEffect](h.sectionsShowDuration)}else{m[h.sectionsHideEffect](h.sectionsHideDuration)}})};var p=function(m){var n=(function(){return m?c.attr("data-instafilta-hide","false"):c}()).filter('[data-instafilta-hide="false"]')[h.itemsShowEffect](h.itemsShowDuration);m||c.filter('[data-instafilta-hide="true"]')[h.itemsHideEffect](h.itemsHideDuration);h.hideEmptySections&&e();if(typeof h.onFilterComplete==="function"){h.onFilterComplete.apply(this,[n])}return n};var g=function(){return p(true)};l=function(m){m=h.caseSensitive?m:m.toLowerCase();if(f===m){return false}else{f=m}m||g();c.each(function(){var y=b(this);if(!y.data("originalText")){y.data("originalHtml",y.html());y.data("originalText",y.data("values")[0])}var n=(function(t,u){var s=-1;for(var v=0;v<t.length;v++){s=(h.caseSensitive?t[v]:t[v].toLowerCase()).indexOf(u);if(s>=0){break}}return s}(y.data("values"),m));var o=y.data("originalText"),z=h.caseSensitive?o:o.toLowerCase(),x=null,w=null;if(n>=0&&h.markMatches){x=o.substring(n,n+m.length);w=o.replace(x,'<span class="'+h.matchCssClass+'">'+x+"</span>");y.html(y.data("originalHtml").replace(o,w))}y.attr("data-instafilta-hide",(h.beginsWith&&n!==0)||n<0?"true":"false")});return p()};k=function(n,m){if(!n||!n.length){return g()}if(typeof n==="string"){n=n.split(",")}c.each(function(){var o=true,B=0,A=b(this),x=A.data(h.categoryDataAttr);if(x){x=x.split(",");for(var y=0;y<x.length;y++){for(var z=0;z<n.length;z++){if(x[y]===n[z]){if(m){B++}else{o=false;break}}}}if(m&&B===n.length){o=false}A.html(A.data("originalText")).attr("data-instafilta-hide",o)}});return p()};b(this).on("keyup",function(){var m=b(this);clearTimeout(q);q=setTimeout(function(){l(m.val())},h.typeDelay)})});return{filterTerm:l,filterCategory:k}}}(jQuery));