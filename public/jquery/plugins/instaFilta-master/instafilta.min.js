/*!
 * instaFilta
 * Version: 1.4.4
 * Description: jQuery plugin for performing in-page filtering
 * Homepage and documentation: https://github.com/chromawoods/instaFilta
 * Author: Andreas Larsson <andreas@chromawoods.com> (http://chromawoods.com)
 * Contributions: Jaap-Jan Frans
 */
;(function(a){a.fn.instaFilta=function(e){var c=null,d=null;var g=a.extend({scope:null,targets:".instafilta-target",sections:".instafilta-section",categoryDataAttr:"instafilta-category",matchCssClass:"instafilta-match",itemsHideEffect:"hide",itemsHideDuration:0,itemsShowEffect:"show",itemsShowDuration:0,sectionsHideEffect:"hide",sectionsHideDuration:0,sectionsShowEffect:"show",sectionsShowDuration:0,onFilterComplete:null,markMatches:false,hideEmptySections:true,beginsWith:false,caseSensitive:false,typeDelay:0,useSynonyms:true,synonyms:[{src:"à,á,å,ä,â,ã",dst:"a"},{src:"À,Á,Å,Ä,Â,Ã",dst:"A"},{src:"è,é,ë,ê",dst:"e"},{src:"È,É,Ë,Ê",dst:"E"},{src:"ì,í,ï,î",dst:"i"},{src:"Ì,Í,Ï,Î",dst:"I"},{src:"ò,ó,ö,ô,õ",dst:"o"},{src:"Ò,Ó,Ö,Ô,Õ",dst:"O"},{src:"ù,ú,ü,û",dst:"u"},{src:"Ù,Ú,Ü,Û",dst:"U"},{src:"ç",dst:"c"},{src:"Ç",dst:"C"},{src:"æ",dst:"ae"}]},e);if(g.useSynonyms){for(var f=0,b=g.synonyms.length;f<b;f++){g.synonyms[f].src=g.synonyms[f].src.split(",")}}this.each(function(){var o,m,l,n,j="";if(g.scope){n=a(this).closest(g.scope);m=n.find(g.targets);l=n.find(g.sections)}else{m=a(g.targets);l=a(g.sections)}m.each(function(){$target=a(this),original=$target.text();$target.data("values",(function(u){var q=[original],v=original;if(!g.useSynonyms){return q}for(var t=0,p=u.length;t<p;t++){for(var r=0;r<u[t].src.length;r++){v=v.replace(u[t].src[r],u[t].dst)}}!!(v===original)||q.push(v);return q}(g.synonyms)))});var k=function(){l.each(function(){var p=a(this);if(p.find('[data-instafilta-hide="false"]').length){p[g.sectionsShowEffect](g.sectionsShowDuration)}else{p[g.sectionsHideEffect](g.sectionsHideDuration)}})};var h=function(q){var p=(function(){return q?m.attr("data-instafilta-hide","false"):m}()).filter('[data-instafilta-hide="false"]')[g.itemsShowEffect](g.itemsShowDuration);q||m.filter('[data-instafilta-hide="true"]')[g.itemsHideEffect](g.itemsHideDuration);g.hideEmptySections&&k();if(typeof g.onFilterComplete==="function"){g.onFilterComplete.apply(this,[p])}return p};var i=function(){return h(true)};c=function(p){p=g.caseSensitive?p:p.toLowerCase();if(j===p){return false}else{j=p}p||i();m.each(function(){var r=a(this);if(!r.data("originalText")){r.data("originalHtml",r.html());r.data("originalText",r.data("values")[0])}var v=(function(w,z){var x=-1;for(var y=0;y<w.length;y++){x=(g.caseSensitive?w[y]:w[y].toLowerCase()).indexOf(z);if(x>=0){break}}return x}(r.data("values"),p));var u=r.data("originalText"),q=g.caseSensitive?u:u.toLowerCase(),s=null,t=null;if(v>=0&&g.markMatches){s=u.substring(v,v+p.length);t=u.replace(s,'<span class="'+g.matchCssClass+'">'+s+"</span>");r.html(r.data("originalHtml").replace(u,t))}r.attr("data-instafilta-hide",(g.beginsWith&&v!==0)||v<0?"true":"false")});return h()};d=function(p,q){if(!p||!p.length){return i()}if(typeof p==="string"){p=p.split(",")}m.each(function(){var w=true,r=0,s=a(this),v=s.data(g.categoryDataAttr);if(v){v=v.split(",");for(var u=0;u<v.length;u++){for(var t=0;t<p.length;t++){if(v[u]===p[t]){if(q){r++}else{w=false;break}}}}if(q&&r===p.length){w=false}s.html(s.data("originalText")).attr("data-instafilta-hide",w)}});return h()};a(this).on("keyup",function(){var p=a(this);clearTimeout(o);o=setTimeout(function(){c(p.val())},g.typeDelay)})});return{filterTerm:c,filterCategory:d}}}(jQuery));