(function(r,p,n,s){var m=function(){var a=n.body||n.documentElement,a=a.style;if(a.WebkitTransition==""){return"-webkit-"}if(a.MozTransition==""){return"-moz-"}if(a.OTransition==""){return"-o-"}if(a.transition==""){return""}return false},o=m()===false?false:true,l=function(b,a,d){var c={},e=m();c[e+"transform"]="translateX("+a+")";c[e+"transition"]=e+"transform "+d+"s linear";b.css(c)},q=("ontouchstart" in p),k=p.navigator.pointerEnabled||p.navigator.msPointerEnabled,t=function(a){if(q){return true}if(!k||typeof a==="undefined"||typeof a.pointerType==="undefined"){return false}if(typeof a.MSPOINTER_TYPE_MOUSE!=="undefined"){if(a.MSPOINTER_TYPE_MOUSE!=a.pointerType){return true}}else{if(a.pointerType!="mouse"){return true}}return false};r.fn.imageLightbox=function(i){var i=r.extend({selector:'id="imagelightbox"',animationSpeed:250,preloadNext:true,enableKeyboard:true,quitOnEnd:false,quitOnImgClick:false,quitOnDocClick:true,onStart:false,onEnd:false,onLoadStart:false,onLoadEnd:false},i),b=r([]),a=r(),f=r(),z=0,d=0,h=0,c=false,y=function(){if(!f.length){return true}var w=r(p).width()*0.8,v=r(p).height()*0.9,u=new Image();u.src=f.attr("src");u.onload=function(){z=u.width;d=u.height;if(z>w||d>v){var B=z/d>w/v?z/w:d/v;z/=B;d/=B}f.css({width:z+"px",height:d+"px",top:(r(p).height()-d)/2+"px",left:(r(p).width()-z)/2+"px"})}},g=function(u){if(c){return false}u=typeof u==="undefined"?false:u=="left"?1:-1;if(f.length){if(u!==false&&(b.length<2||(i.quitOnEnd===true&&((u===-1&&b.index(a)==0)||(u===1&&b.index(a)==b.length-1))))){j();return false}var v={opacity:0};if(o){l(f,(100*u)-h+"px",i.animationSpeed/1000)}else{v.left=parseInt(f.css("left"))+100*u+"px"}f.animate(v,i.animationSpeed,function(){x()});h=0}c=true;if(i.onLoadStart!==false){i.onLoadStart()}setTimeout(function(){f=r("<img "+i.selector+" />").attr("src",a.attr("href")).on("load",function(){f.appendTo("body");y();var A={opacity:1};f.css("opacity",0);if(o){l(f,-100*u+"px",0);setTimeout(function(){l(f,0+"px",i.animationSpeed/1000)},50)}else{var B=parseInt(f.css("left"));A.left=B+"px";f.css("left",B-100*u+"px")}f.animate(A,i.animationSpeed,function(){c=false;if(i.onLoadEnd!==false){i.onLoadEnd()}});if(i.preloadNext){var F=b.eq(b.index(a)+1);if(!F.length){F=b.eq(0)}r("<img />").attr("src",F.attr("href"))}}).on("error",function(){if(i.onLoadEnd!==false){i.onLoadEnd()}});var D=0,C=0,w=0;f.on(k?"pointerup MSPointerUp":"click",function(B){B.preventDefault();if(i.quitOnImgClick){j();return false}if(t(B.originalEvent)){return true}var A=(B.pageX||B.originalEvent.pageX)-B.target.offsetLeft;a=b.eq(b.index(a)-(z/2>A?1:-1));if(!a.length){a=b.eq(z/2>A?b.length:0)}g(z/2>A?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(A){if(!t(A.originalEvent)||i.quitOnImgClick){return true}if(o){w=parseInt(f.css("left"))}D=A.originalEvent.pageX||A.originalEvent.touches[0].pageX}).on("touchmove pointermove MSPointerMove",function(A){if(!t(A.originalEvent)||i.quitOnImgClick){return true}A.preventDefault();C=A.originalEvent.pageX||A.originalEvent.touches[0].pageX;h=D-C;if(o){l(f,-h+"px",0)}else{f.css("left",w-h+"px")}}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(A){if(!t(A.originalEvent)||i.quitOnImgClick){return true}if(Math.abs(h)>50){a=b.eq(b.index(a)-(h<0?1:-1));if(!a.length){a=b.eq(h<0?b.length:0)}g(h>0?"right":"left")}else{if(o){l(f,0+"px",i.animationSpeed/1000)}else{f.animate({left:w+"px"},i.animationSpeed/2)}}})},i.animationSpeed+100)},x=function(){if(!f.length){return false}f.remove();f=r()},j=function(){if(!f.length){return false}f.animate({opacity:0},i.animationSpeed,function(){x();c=false;if(i.onEnd!==false){i.onEnd()}})},e=function(u){u.each(function(){b=b.add(r(this))});u.on("click.imageLightbox",function(v){v.preventDefault();if(c){return false}c=false;if(i.onStart!==false){i.onStart()}a=r(this);g()})};r(p).on("resize",y);if(i.quitOnDocClick){r(n).on(q?"touchend":"click",function(u){if(f.length&&!r(u.target).is(f)){j()}})}if(i.enableKeyboard){r(n).on("keyup",function(u){if(!f.length){return true}u.preventDefault();if(u.keyCode==27){j()}if(u.keyCode==37||u.keyCode==39){a=b.eq(b.index(a)-(u.keyCode==37?1:-1));if(!a.length){a=b.eq(u.keyCode==37?b.length:0)}g(u.keyCode==37?"left":"right")}})}e(r(this));this.switchImageLightbox=function(w){var v=b.eq(w);if(v.length){var u=b.index(a);a=v;g(w<u?"left":"right")}return this};this.addToImageLightbox=function(u){e(u)};this.quitImageLightbox=function(){j();return this};return this}})(jQuery,window,document);$(function(){var x=function(){$('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},w=function(){$("#imagelightbox-loading").remove()},r=function(){$('<div id="imagelightbox-overlay"></div>').appendTo("body")},u=function(){$("#imagelightbox-overlay").remove()},C=function(a){$('<button type="button" id="imagelightbox-close" title="Close"></button>').appendTo("body").on("click touchend",function(){$(this).remove();a.quitImageLightbox();return false})},p=function(){$("#imagelightbox-close").remove()},A=function(){var a=$('a[href="'+$("#imagelightbox").attr("src")+'"] img').attr("alt");if(a.length>0){$('<div id="imagelightbox-caption">'+a+"</div>").appendTo("body")}},y=function(){$("#imagelightbox-caption").remove()},D=function(d,e){var f=$(e);if(f.length){var a=$('<div id="imagelightbox-nav"></div>');for(var b=0;b<f.length;b++){a.append('<button type="button"></button>')}a.appendTo("body");a.on("click touchend",function(){return false});var c=a.find("button");c.on("click touchend",function(){var g=$(this);if(f.eq(g.index()).attr("href")!=$("#imagelightbox").attr("src")){d.switchImageLightbox(g.index())}c.removeClass("active");c.eq(g.index()).addClass("active");return false}).on("touchend",function(){return false})}},s=function(b){var a=$("#imagelightbox-nav button");a.removeClass("active");a.eq($(b).filter('[href="'+$("#imagelightbox").attr("src")+'"]').index(b)).addClass("active")},t=function(){$("#imagelightbox-nav").remove()},z=function(b,c){var a=$('<button type="button" class="imagelightbox-arrow imagelightbox-arrow-left"></button><button type="button" class="imagelightbox-arrow imagelightbox-arrow-right"></button>');a.appendTo("body");a.on("click touchend",function(d){d.preventDefault();var e=$(this),g=$(c+'[href="'+$("#imagelightbox").attr("src")+'"]'),f=g.index(c);if(e.hasClass("imagelightbox-arrow-left")){f=f-1;if(!$(c).eq(f).length){f=$(c).length}}else{f=f+1;if(!$(c).eq(f).length){f=0}}b.switchImageLightbox(f);return false})},B=function(){$(".imagelightbox-arrow").remove()};var v='a[data-imagelightbox="g"]';var q=$(v).imageLightbox({onStart:function(){r();C(q);z(q,v)},onEnd:function(){u();p();B();w()},onLoadStart:function(){x()},onLoadEnd:function(){$(".imagelightbox-arrow").css("display","block");w()}})});